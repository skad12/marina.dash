{"ast":null,"code":"var _s = $RefreshSig$();\nimport store from \"../../utils/store\";\nimport urls from \"../../api/urls\";\nimport useAPI from \"./useAPI\";\nfunction useAuth(props) {\n  _s();\n  const {\n    get,\n    isLoading,\n    post\n  } = useAPI();\n  const login = async fdata => {\n    try {\n      const {\n        error,\n        data\n      } = await post(urls.auth.login, fdata);\n      if (error) return;\n      store.setTokens(data.data.tokens);\n      window.location = \"/\";\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const restoreUser = async cb => {\n    const token = store.getAccessToken();\n    if (!token) {\n      if (typeof cb === \"function\") return cb(null);\n      return null;\n    }\n    const response = await get(urls.profile.me);\n    if (typeof cb === \"function\") {\n      return cb(response.error || !response.data ? null : response.data.data.profile);\n    }\n    if (response.error || !response.data) return null;\n    return response.data.data.profile;\n  };\n  const createAccount = async details => {\n    const {\n      data,\n      error\n    } = await post(urls.auth.register, details);\n    if (error) return;\n    store.setTokens(data.data.tokens);\n    window.location = \"/\";\n  };\n  const logout = () => {\n    store.removeTokens();\n    window.location = \"/\";\n  };\n  return {\n    login,\n    isLoading,\n    restoreUser,\n    logout,\n    createAccount\n  };\n}\n_s(useAuth, \"oBIjlvS16AdAhcawbuA/DrVZQfw=\", false, function () {\n  return [useAPI];\n});\nexport default useAuth;","map":{"version":3,"names":["store","urls","useAPI","useAuth","props","_s","get","isLoading","post","login","fdata","error","data","auth","setTokens","tokens","window","location","console","log","restoreUser","cb","token","getAccessToken","response","profile","me","createAccount","details","register","logout","removeTokens"],"sources":["/Users/Dami/Desktop/Projects/dashboard.tiptopapts.com/src/hooks/api/useAuth.js"],"sourcesContent":["import store from \"../../utils/store\";\nimport urls from \"../../api/urls\";\nimport useAPI from \"./useAPI\";\n\nfunction useAuth(props) {\n  const { get, isLoading, post } = useAPI();\n\n  const login = async (fdata) => {\n    try {\n      const { error, data } = await post(urls.auth.login, fdata);\n      if (error) return;\n      store.setTokens(data.data.tokens);\n      window.location = \"/\";\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const restoreUser = async (cb) => {\n    const token = store.getAccessToken();\n    if (!token) {\n      if (typeof cb === \"function\") return cb(null);\n      return null;\n    }\n    const response = await get(urls.profile.me);\n    if (typeof cb === \"function\") {\n      return cb(\n        response.error || !response.data ? null : response.data.data.profile\n      );\n    }\n    if (response.error || !response.data) return null;\n    return response.data.data.profile;\n  };\n\n  const createAccount = async (details) => {\n    const { data, error } = await post(urls.auth.register, details);\n    if (error) return;\n    store.setTokens(data.data.tokens);\n    window.location = \"/\";\n  };\n\n  const logout = () => {\n    store.removeTokens();\n    window.location = \"/\";\n  };\n\n  return { login, isLoading, restoreUser, logout, createAccount };\n}\n\nexport default useAuth;\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,mBAAmB;AACrC,OAAOC,IAAI,MAAM,gBAAgB;AACjC,OAAOC,MAAM,MAAM,UAAU;AAE7B,SAASC,OAAOA,CAACC,KAAK,EAAE;EAAAC,EAAA;EACtB,MAAM;IAAEC,GAAG;IAAEC,SAAS;IAAEC;EAAK,CAAC,GAAGN,MAAM,CAAC,CAAC;EAEzC,MAAMO,KAAK,GAAG,MAAOC,KAAK,IAAK;IAC7B,IAAI;MACF,MAAM;QAAEC,KAAK;QAAEC;MAAK,CAAC,GAAG,MAAMJ,IAAI,CAACP,IAAI,CAACY,IAAI,CAACJ,KAAK,EAAEC,KAAK,CAAC;MAC1D,IAAIC,KAAK,EAAE;MACXX,KAAK,CAACc,SAAS,CAACF,IAAI,CAACA,IAAI,CAACG,MAAM,CAAC;MACjCC,MAAM,CAACC,QAAQ,GAAG,GAAG;IACvB,CAAC,CAAC,OAAON,KAAK,EAAE;MACdO,OAAO,CAACC,GAAG,CAACR,KAAK,CAAC;IACpB;EACF,CAAC;EAED,MAAMS,WAAW,GAAG,MAAOC,EAAE,IAAK;IAChC,MAAMC,KAAK,GAAGtB,KAAK,CAACuB,cAAc,CAAC,CAAC;IACpC,IAAI,CAACD,KAAK,EAAE;MACV,IAAI,OAAOD,EAAE,KAAK,UAAU,EAAE,OAAOA,EAAE,CAAC,IAAI,CAAC;MAC7C,OAAO,IAAI;IACb;IACA,MAAMG,QAAQ,GAAG,MAAMlB,GAAG,CAACL,IAAI,CAACwB,OAAO,CAACC,EAAE,CAAC;IAC3C,IAAI,OAAOL,EAAE,KAAK,UAAU,EAAE;MAC5B,OAAOA,EAAE,CACPG,QAAQ,CAACb,KAAK,IAAI,CAACa,QAAQ,CAACZ,IAAI,GAAG,IAAI,GAAGY,QAAQ,CAACZ,IAAI,CAACA,IAAI,CAACa,OAC/D,CAAC;IACH;IACA,IAAID,QAAQ,CAACb,KAAK,IAAI,CAACa,QAAQ,CAACZ,IAAI,EAAE,OAAO,IAAI;IACjD,OAAOY,QAAQ,CAACZ,IAAI,CAACA,IAAI,CAACa,OAAO;EACnC,CAAC;EAED,MAAME,aAAa,GAAG,MAAOC,OAAO,IAAK;IACvC,MAAM;MAAEhB,IAAI;MAAED;IAAM,CAAC,GAAG,MAAMH,IAAI,CAACP,IAAI,CAACY,IAAI,CAACgB,QAAQ,EAAED,OAAO,CAAC;IAC/D,IAAIjB,KAAK,EAAE;IACXX,KAAK,CAACc,SAAS,CAACF,IAAI,CAACA,IAAI,CAACG,MAAM,CAAC;IACjCC,MAAM,CAACC,QAAQ,GAAG,GAAG;EACvB,CAAC;EAED,MAAMa,MAAM,GAAGA,CAAA,KAAM;IACnB9B,KAAK,CAAC+B,YAAY,CAAC,CAAC;IACpBf,MAAM,CAACC,QAAQ,GAAG,GAAG;EACvB,CAAC;EAED,OAAO;IAAER,KAAK;IAAEF,SAAS;IAAEa,WAAW;IAAEU,MAAM;IAAEH;EAAc,CAAC;AACjE;AAACtB,EAAA,CA3CQF,OAAO;EAAA,QACmBD,MAAM;AAAA;AA4CzC,eAAeC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}