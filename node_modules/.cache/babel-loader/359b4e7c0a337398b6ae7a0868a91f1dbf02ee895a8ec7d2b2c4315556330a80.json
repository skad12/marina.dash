{"ast":null,"code":"var _s = $RefreshSig$();\nimport urls from \"../../api/urls\";\nimport { useContext, useState } from \"react\";\nimport useAPI from \"./useAPI\";\nimport { toast } from \"react-toastify\";\nimport DataContext from \"../../contexts/DataContext\";\nfunction useBookings(props) {\n  _s();\n  const [bookings, setBookings] = useState([]);\n  const [reviews, setReviews] = useState([]);\n  const {\n    get,\n    isLoading,\n    post,\n    patch\n  } = useAPI();\n  const AppContextData = useContext(DataContext);\n  const getBookings = async (start, end, filter = false) => {\n    const {\n      data,\n      error\n    } = await get(urls.bookings.baseUrl + (start ? `${filter ? `status=${filter}&` : \"\"}from=${start}&to=${end}` : \"\"));\n    if (error) return;\n    setBookings(data.data.bookings);\n  };\n  const getBookingsSearch = async q => {\n    const {\n      data,\n      error\n    } = await get(urls.bookings.baseUrl + `q=${q}`);\n    if (error) return;\n    setBookings(data.data.bookings);\n  };\n  const getReviews = async () => {\n    const {\n      data,\n      error\n    } = await get(urls.bookings.reviews);\n    if (error) return;\n    setReviews(data.data.reviews);\n  };\n  const changeReviewStatus = async id => {\n    const {\n      data,\n      error\n    } = await patch(urls.bookings.reviews + `/${id}`);\n    if (error) return;\n    toast.success(data.message);\n    getReviews();\n  };\n  const checkInBooking = async id => {\n    const {\n      data,\n      error\n    } = await post(urls.bookings.checkIn + id);\n    if (error) return;\n    toast.success(data.message);\n    AppContextData.getApartments();\n  };\n  const checkOutBooking = async (id, cb) => {\n    const {\n      data,\n      error\n    } = await post(urls.bookings.checkOut + id);\n    if (error) return;\n    toast.success(data.message);\n    if (typeof cb === \"function\") cb();\n    AppContextData.getApartments();\n  };\n  const refundDeposite = async (id, fdata) => {\n    const {\n      data,\n      error\n    } = await patch(urls.bookings.refund.replace(\":id\", id), fdata);\n    if (error) return;\n    toast.success(data.message);\n    AppContextData.getApartments();\n  };\n  const confirmDeposite = async (id, fdata, cb) => {\n    const {\n      data,\n      error\n    } = await patch(urls.bookings.confirmPayment.replace(\":id\", id), fdata);\n    if (error) return;\n    toast.success(data.message);\n    if (typeof cb === \"function\") cb();\n    AppContextData.getApartments();\n  };\n  return {\n    isLoading,\n    bookings,\n    reviews,\n    getReviews,\n    getBookings,\n    checkInBooking,\n    checkOutBooking,\n    changeReviewStatus,\n    getBookingsSearch,\n    refundDeposite,\n    confirmDeposite\n  };\n}\n_s(useBookings, \"yOPE/qkPDkhLtKVrUQC7L4smoOA=\", false, function () {\n  return [useAPI];\n});\nexport default useBookings;","map":{"version":3,"names":["urls","useContext","useState","useAPI","toast","DataContext","useBookings","props","_s","bookings","setBookings","reviews","setReviews","get","isLoading","post","patch","AppContextData","getBookings","start","end","filter","data","error","baseUrl","getBookingsSearch","q","getReviews","changeReviewStatus","id","success","message","checkInBooking","checkIn","getApartments","checkOutBooking","cb","checkOut","refundDeposite","fdata","refund","replace","confirmDeposite","confirmPayment"],"sources":["/Users/Dami/Desktop/Projects/MARINA/marina.dash/src/hooks/api/useBookings.js"],"sourcesContent":["import urls from \"../../api/urls\";\nimport { useContext, useState } from \"react\";\nimport useAPI from \"./useAPI\";\nimport { toast } from \"react-toastify\";\nimport DataContext from \"../../contexts/DataContext\";\n\nfunction useBookings(props) {\n  const [bookings, setBookings] = useState([]);\n  const [reviews, setReviews] = useState([]);\n  const { get, isLoading, post, patch } = useAPI();\n  const AppContextData = useContext(DataContext);\n\n  const getBookings = async (start, end, filter = false) => {\n    const { data, error } = await get(\n      urls.bookings.baseUrl +\n        (start\n          ? `${filter ? `status=${filter}&` : \"\"}from=${start}&to=${end}`\n          : \"\")\n    );\n    if (error) return;\n    setBookings(data.data.bookings);\n  };\n\n  const getBookingsSearch = async (q) => {\n    const { data, error } = await get(urls.bookings.baseUrl + `q=${q}`);\n    if (error) return;\n    setBookings(data.data.bookings);\n  };\n\n  const getReviews = async () => {\n    const { data, error } = await get(urls.bookings.reviews);\n    if (error) return;\n    setReviews(data.data.reviews);\n  };\n\n  const changeReviewStatus = async (id) => {\n    const { data, error } = await patch(urls.bookings.reviews + `/${id}`);\n    if (error) return;\n    toast.success(data.message);\n    getReviews();\n  };\n\n  const checkInBooking = async (id) => {\n    const { data, error } = await post(urls.bookings.checkIn + id);\n    if (error) return;\n    toast.success(data.message);\n    AppContextData.getApartments();\n  };\n  const checkOutBooking = async (id, cb) => {\n    const { data, error } = await post(urls.bookings.checkOut + id);\n    if (error) return;\n    toast.success(data.message);\n    if (typeof cb === \"function\") cb();\n    AppContextData.getApartments();\n  };\n\n  const refundDeposite = async (id, fdata) => {\n    const { data, error } = await patch(\n      urls.bookings.refund.replace(\":id\", id),\n      fdata\n    );\n    if (error) return;\n    toast.success(data.message);\n    AppContextData.getApartments();\n  };\n\n  const confirmDeposite = async (id, fdata, cb) => {\n    const { data, error } = await patch(\n      urls.bookings.confirmPayment.replace(\":id\", id),\n      fdata\n    );\n    if (error) return;\n    toast.success(data.message);\n    if (typeof cb === \"function\") cb();\n    AppContextData.getApartments();\n  };\n\n  return {\n    isLoading,\n    bookings,\n    reviews,\n    getReviews,\n    getBookings,\n    checkInBooking,\n    checkOutBooking,\n    changeReviewStatus,\n    getBookingsSearch,\n    refundDeposite,\n    confirmDeposite,\n  };\n}\n\nexport default useBookings;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}